<section class="card card-fill">
  <h2>Game</h2>

  <p class="subtitle">Del koden med vennene dine sÃ¥ de kan bli med pÃ¥ spillet ğŸ‘‡</p>

  <div class="join-code">
    {{ getSessionCode() }}
  </div>
  <div
    *ngIf="playerName === session?.hostName"
    style="display: flex; gap: 0.6rem; justify-content: center; margin-top: 1rem"
  >
    <button class="btn secondary" type="button" (click)="openSettingsModal()">
      âš™ï¸ Innstillinger
    </button>

    <button class="btn primary" type="button" (click)="onStartRound()">Start spill</button>
  </div>

  <hr style="margin: 1.5rem 0; opacity: 0.4" />

  <h3>Spillere i dette spillet</h3>

  <div class="player-list-scroll">
    <ul class="player-list">
      <li
        *ngFor="let p of players; trackBy: trackPlayer"
        class="player-row"
        [class.is-host]="p.isHost"
      >
        <div class="player-main">
          <span class="player-name">{{ p.name }}</span>
          <span *ngIf="p.isHost" class="badge host-badge">Host</span>
        </div>
      </li>
    </ul>
  </div>
</section>

<!-- SETTINGS MODAL -->
<div class="modal-backdrop" *ngIf="showSettingsModal" (click)="closeSettingsModal()">
  <div class="modal" (click)="$event.stopPropagation()">
    <h3>Spillinnstillinger</h3>
    <p class="subtitle" style="margin-top: 0.35rem">
      Disse gjelder for alle som joiner denne runden.
    </p>

    <label class="modal-label">Start-liv (ğŸ»)</label>

    <div class="modal-row">
      <input
        class="modal-input"
        type="number"
        [min]="startLivesMin"
        [max]="startLivesMax"
        [(ngModel)]="startLivesDraft"
      />
      <div class="modal-hint">{{ startLivesMin }}â€“{{ startLivesMax }}</div>
    </div>

    <div class="modal-actions">
      <button class="btn secondary" type="button" (click)="closeSettingsModal()">Avbryt</button>
      <button class="btn primary" type="button" (click)="saveSettings()">Lagre</button>
    </div>
  </div>
</div>
